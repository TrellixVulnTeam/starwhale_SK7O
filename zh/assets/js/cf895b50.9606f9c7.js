"use strict";(self.webpackChunkclearml_docs=self.webpackChunkclearml_docs||[]).push([[348],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return p}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),d=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=d(a),p=n,h=m["".concat(s,".").concat(p)]||m[p]||c[p]||l;return a?r.createElement(h,o(o({ref:t},u),{},{components:a})):r.createElement(h,o({ref:t},u))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var d=2;d<l;d++)o[d]=a[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2945:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return c}});var r=a(7462),n=a(3366),l=(a(7294),a(3905)),o=["components"],i={},s="Starwhale Client User Guide",d={unversionedId:"client_user_guide",id:"client_user_guide",title:"Starwhale Client User Guide",description:"This guide explains all commands provided by the Starwhale client (swcli).",source:"@site/docs/client_user_guide.md",sourceDirName:".",slug:"/client_user_guide",permalink:"/starwhale/zh/docs/client_user_guide",draft:!1,editUrl:"https://github.com/star-whale/starwhale/edit/main/docs/client_user_guide.md",tags:[],version:"current",frontMatter:{}},u={},c=[{value:"Resource URI",id:"resource-uri",level:2},{value:"Instance URI",id:"instance-uri",level:2},{value:"Project URI",id:"project-uri",level:2},{value:"Other Resources URI",id:"other-resources-uri",level:2},{value:"Names",id:"names",level:2},{value:"Name uniqueness requirement",id:"name-uniqueness-requirement",level:3},{value:"Select the default instance",id:"select-the-default-instance",level:2},{value:"Select the default project",id:"select-the-default-project",level:2},{value:"Create a project",id:"create-a-project",level:2},{value:"List projects",id:"list-projects",level:2},{value:"Remove a project",id:"remove-a-project",level:2},{value:"Recover a project",id:"recover-a-project",level:2},{value:"Build a model",id:"build-a-model",level:2},{value:"List models",id:"list-models",level:2},{value:"Remove a model",id:"remove-a-model",level:2},{value:"Recover a model",id:"recover-a-model",level:2},{value:"Evaluate a model",id:"evaluate-a-model",level:2},{value:"Manage model tags",id:"manage-model-tags",level:2},{value:"Copy a model",id:"copy-a-model",level:2},{value:"Show model history",id:"show-model-history",level:2},{value:"Revert a model to an old version",id:"revert-a-model-to-an-old-version",level:2},{value:"Build a dataset",id:"build-a-dataset",level:2},{value:"List datasets",id:"list-datasets",level:2},{value:"Remove a dataset",id:"remove-a-dataset",level:2},{value:"Recover a dataset",id:"recover-a-dataset",level:2},{value:"Manage dataset tags",id:"manage-dataset-tags",level:2},{value:"Copy a dataset",id:"copy-a-dataset",level:2},{value:"Show dataset history",id:"show-dataset-history",level:2},{value:"Revert a dataset to an old version",id:"revert-a-dataset-to-an-old-version",level:2},{value:"Build a runtime",id:"build-a-runtime",level:2},{value:"List runtimes",id:"list-runtimes",level:2},{value:"Remove a runtime",id:"remove-a-runtime",level:2},{value:"Recover a runtime",id:"recover-a-runtime",level:2},{value:"Copy a runtime",id:"copy-a-runtime",level:2},{value:"Show runtime history",id:"show-runtime-history",level:2},{value:"Revert a runtime to an old version",id:"revert-a-runtime-to-an-old-version",level:2},{value:"List jobs",id:"list-jobs",level:2},{value:"Get a job&#39;s detailed information",id:"get-a-jobs-detailed-information",level:2},{value:"Pause a job",id:"pause-a-job",level:2},{value:"Resume a job",id:"resume-a-job",level:2},{value:"Cancel a job",id:"cancel-a-job",level:2},{value:"Garbage collection",id:"garbage-collection",level:2},{value:"Special rules for versioned resources",id:"special-rules-for-versioned-resources",level:2},{value:"Versioned resource creation and update",id:"versioned-resource-creation-and-update",level:3},{value:"Versioned resource removal and recovery",id:"versioned-resource-removal-and-recovery",level:3}],m={toc:c};function p(e){var t=e.components,a=(0,n.Z)(e,o);return(0,l.kt)("wrapper",(0,r.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"starwhale-client-user-guide"},"Starwhale Client User Guide"),(0,l.kt)("p",null,"This guide explains all commands provided by the Starwhale client (swcli)."),(0,l.kt)("h1",{id:"definitions"},"Definitions"),(0,l.kt)("h2",{id:"resource-uri"},"Resource URI"),(0,l.kt)("p",null,"Resource URI is widely used in Starwhale client commands. The URI can refer to a resource in the local instance or any other resource in a remote instance. In this way, the Starwhale client can easily manipulate any resource."),(0,l.kt)("h2",{id:"instance-uri"},"Instance URI"),(0,l.kt)("p",null,"Instance URI can be either:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A URL in format: ",(0,l.kt)("inlineCode",{parentName:"li"},"[http(s)://]<hostname or ip>[:<port>]"),", which refers to a Starwhale controller. The default scheme is HTTP, and the default port is 7827."),(0,l.kt)("li",{parentName:"ul"},"local, which means the local standalone instance.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Caveat")),(0,l.kt)("p",null,'"local" is different from "localhost". The former means the local standalone instance without a controller, while the latter implies a controller listening at the default port 7827 on localhost.'),(0,l.kt)("h2",{id:"project-uri"},"Project URI"),(0,l.kt)("p",null,"Project URI is in the format ",(0,l.kt)("inlineCode",{parentName:"p"},"[<Instance URI>/project/]<project name>"),". If the instance URI is not specified, use the default instance instead."),(0,l.kt)("h2",{id:"other-resources-uri"},"Other Resources URI"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Model: ",(0,l.kt)("inlineCode",{parentName:"li"},"[<Project URI>/model/]<model name>[/version/<version id>]")),(0,l.kt)("li",{parentName:"ul"},"Dataset: ",(0,l.kt)("inlineCode",{parentName:"li"},"[<Project URI>/dataset/]<dataset name>[/version/<version id>]")),(0,l.kt)("li",{parentName:"ul"},"Runtime: ",(0,l.kt)("inlineCode",{parentName:"li"},"[<Project URI>/runtime/]<runtime name>[/version/<version id>]")),(0,l.kt)("li",{parentName:"ul"},"Job: ",(0,l.kt)("inlineCode",{parentName:"li"},"[<Project URI>/job/]<job id>"))),(0,l.kt)("p",null,"If the project URI is not specified, use the default project."),(0,l.kt)("p",null,"If the version id is not specified, use the latest version."),(0,l.kt)("h2",{id:"names"},"Names"),(0,l.kt)("p",null,"Names mean project names, model names, dataset names, runtime names, and tag names."),(0,l.kt)("p",null,"Names are case-insensitive."),(0,l.kt)("p",null,"A name MUST only consist of letters ",(0,l.kt)("inlineCode",{parentName:"p"},"A-Z a-z"),", digits ",(0,l.kt)("inlineCode",{parentName:"p"},"0-9"),", the hyphen character ",(0,l.kt)("inlineCode",{parentName:"p"},"-"),", and the underscore character ",(0,l.kt)("inlineCode",{parentName:"p"},"_"),"."),(0,l.kt)("p",null,"A name should always start with a letter or the ",(0,l.kt)("inlineCode",{parentName:"p"},"_")," character."),(0,l.kt)("p",null,"The maximum length of a name is 80."),(0,l.kt)("h3",{id:"name-uniqueness-requirement"},"Name uniqueness requirement"),(0,l.kt)("p",null,"The resource name should be a unique string within its owner. For example, the project name should be unique in the owner instance, and the model name should be unique in the owner project."),(0,l.kt)("p",null,'The resource name can not be used by any other resource of the same kind in the owner, including those removed ones. For example, Project "apple" can not have two models named "Alice", even if one of them is already removed.'),(0,l.kt)("p",null,'Different kinds of resources can have the same name. For example, a project and a model can have the same name "Alice". '),(0,l.kt)("p",null,'Resources with different owners can have the same name. For example, a model in project "Apple" and a model in project "Banana" can have the same name "Alice".'),(0,l.kt)("p",null,'Garbage collected resources\' names can be reused. For example, after the model with the name "Alice" in project "Apple" is removed and garbage collected, the project can have a new model with the same name "Alice".'),(0,l.kt)("h1",{id:"instance-management"},"Instance management"),(0,l.kt)("h2",{id:"select-the-default-instance"},"Select the default instance"),(0,l.kt)("p",null,"This command sets the default Starwhale instance used by other commands."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli instance select <instance uri>\n")),(0,l.kt)("h1",{id:"project-management"},"Project management"),(0,l.kt)("h2",{id:"select-the-default-project"},"Select the default project"),(0,l.kt)("p",null,"This command sets both the default instance and project used by other commands. When a project is selected as the default project, its owner instance is also selected as the default instance."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli project select <project uri>\n")),(0,l.kt)("h2",{id:"create-a-project"},"Create a project"),(0,l.kt)("p",null,"This command creates a new project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli project create <project uri>\n")),(0,l.kt)("h2",{id:"list-projects"},"List projects"),(0,l.kt)("p",null,"This command lists all viewable projects in the instance."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli project list [OPTIONS] [instance uri]\n")),(0,l.kt)("p",null,"Options:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"-a, --all Include removed projects which have not been garbage collected.")),(0,l.kt)("h2",{id:"remove-a-project"},"Remove a project"),(0,l.kt)("p",null,"This command removes a project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli project remove <project uri>\n")),(0,l.kt)("h2",{id:"recover-a-project"},"Recover a project"),(0,l.kt)("p",null,"This command recovers a removed project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli project recover <project uri>\n")),(0,l.kt)("h1",{id:"model-management"},"Model management"),(0,l.kt)("h2",{id:"build-a-model"},"Build a model"),(0,l.kt)("p",null,"This command builds a model with the specified working directory. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model build <model uri> [working dir]\n")),(0,l.kt)("h2",{id:"list-models"},"List models"),(0,l.kt)("p",null,"This command lists all models in the project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model list [project uri]\n")),(0,l.kt)("h2",{id:"remove-a-model"},"Remove a model"),(0,l.kt)("p",null,"This command removes a model."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model remove <model uri>\n")),(0,l.kt)("h2",{id:"recover-a-model"},"Recover a model"),(0,l.kt)("p",null,"This command recovers a removed model."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model recover <model uri>\n")),(0,l.kt)("h2",{id:"evaluate-a-model"},"Evaluate a model"),(0,l.kt)("p",null,"This command creates a new job for model evaluation."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model eval [OPTIONS] <model uri> \n")),(0,l.kt)("h2",{id:"manage-model-tags"},"Manage model tags"),(0,l.kt)("p",null,"This command adds or removes tags on the specified model."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model tag [OPTIONS] <model uri> <tag name>[,<tagname>...]\n")),(0,l.kt)("p",null,"Options:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"-r, --remove If specified, remove the tags."),(0,l.kt)("li",{parentName:"ul"},"-q, --quiet If specified, ignore tag name errors like name duplication, name absence, etc.")),(0,l.kt)("h2",{id:"copy-a-model"},"Copy a model"),(0,l.kt)("p",null,"This command copies a model to another place, either locally or remotely."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model copy <source model uri> <destination model uri>\n")),(0,l.kt)("p",null,"The destination model URI should not exist and observes the name uniqueness rule."),(0,l.kt)("h2",{id:"show-model-history"},"Show model history"),(0,l.kt)("p",null,"This command shows the history of a model."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model history <model uri>\n")),(0,l.kt)("h2",{id:"revert-a-model-to-an-old-version"},"Revert a model to an old version"),(0,l.kt)("p",null,"This command reverts a model to an old version."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model revert <model uri>\n")),(0,l.kt)("h1",{id:"dataset-management"},"Dataset Management"),(0,l.kt)("h2",{id:"build-a-dataset"},"Build a dataset"),(0,l.kt)("p",null,"This command builds a dataset with the specified working directory."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset build <dataset uri> [working dir]\n")),(0,l.kt)("h2",{id:"list-datasets"},"List datasets"),(0,l.kt)("p",null,"This command lists all datasets in the project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset list [project uri]\n")),(0,l.kt)("h2",{id:"remove-a-dataset"},"Remove a dataset"),(0,l.kt)("p",null,"This command removes a dataset."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset remove <dataset uri>\n")),(0,l.kt)("h2",{id:"recover-a-dataset"},"Recover a dataset"),(0,l.kt)("p",null,"This command recovers a removed dataset."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset recover <dataset uri>\n")),(0,l.kt)("h2",{id:"manage-dataset-tags"},"Manage dataset tags"),(0,l.kt)("p",null,"This command adds or removes tags on the specified dataset."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset tag [OPTIONS] <dataset uri> <tag name>[,<tagname>...]\n")),(0,l.kt)("p",null,"Options:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"-r, --remove If specified, remove the tags."),(0,l.kt)("li",{parentName:"ul"},"-q, --quiet If specified, ignore tag name errors like name duplication, name absence, etc.")),(0,l.kt)("h2",{id:"copy-a-dataset"},"Copy a dataset"),(0,l.kt)("p",null,"This command copies a dataset to another place, either locally or remotely."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset copy <source dataset uri> <destination dataset uri>\n")),(0,l.kt)("p",null,"The destination dataset URI should not exist and observes the name uniqueness rule."),(0,l.kt)("h2",{id:"show-dataset-history"},"Show dataset history"),(0,l.kt)("p",null,"This command shows the history of a dataset."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset history <dataset uri>\n")),(0,l.kt)("h2",{id:"revert-a-dataset-to-an-old-version"},"Revert a dataset to an old version"),(0,l.kt)("p",null,"This command reverts a dataset to an old version."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli dataset revert <dataset uri>\n")),(0,l.kt)("h1",{id:"runtime-management"},"Runtime management"),(0,l.kt)("h2",{id:"build-a-runtime"},"Build a runtime"),(0,l.kt)("p",null,"This command builds a runtime with the specified working directory."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime build <runtime uri> [working dir]\n")),(0,l.kt)("h2",{id:"list-runtimes"},"List runtimes"),(0,l.kt)("p",null,"This command lists all runtimes in the project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime list [project uri]\n")),(0,l.kt)("h2",{id:"remove-a-runtime"},"Remove a runtime"),(0,l.kt)("p",null,"This command removes a runtime."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime remove <runtime uri>\n")),(0,l.kt)("h2",{id:"recover-a-runtime"},"Recover a runtime"),(0,l.kt)("p",null,"This command recovers a removed runtime."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime recover <runtime uri>\n")),(0,l.kt)("h2",{id:"copy-a-runtime"},"Copy a runtime"),(0,l.kt)("p",null,"This command copies a runtime to another place, either locally or remotely."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime copy <source runtime uri> <destination runtime uri>\n")),(0,l.kt)("p",null,"The destination runtime URI should not exist and observes the name uniqueness rule."),(0,l.kt)("h2",{id:"show-runtime-history"},"Show runtime history"),(0,l.kt)("p",null,"This command shows the history of a runtime."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime history <runtime uri>\n")),(0,l.kt)("h2",{id:"revert-a-runtime-to-an-old-version"},"Revert a runtime to an old version"),(0,l.kt)("p",null,"This command reverts a runtime to an old version."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli runtime revert <runtime uri>\n")),(0,l.kt)("h1",{id:"job-management"},"Job Management"),(0,l.kt)("h2",{id:"list-jobs"},"List jobs"),(0,l.kt)("p",null,"This command lists all jobs in the project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli job list [project uri]\n")),(0,l.kt)("h2",{id:"get-a-jobs-detailed-information"},"Get a job's detailed information"),(0,l.kt)("p",null,"This command shows detailed information about a job."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli job info <job uri>\n")),(0,l.kt)("h2",{id:"pause-a-job"},"Pause a job"),(0,l.kt)("p",null,"This command pauses a running job."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli job pause <job uri>\n")),(0,l.kt)("h2",{id:"resume-a-job"},"Resume a job"),(0,l.kt)("p",null,"This command resumes a paused job."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli job resume <job uri>\n")),(0,l.kt)("h2",{id:"cancel-a-job"},"Cancel a job"),(0,l.kt)("p",null,"This command cancels a running/paused job."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli job cancel <job uri>\n")),(0,l.kt)("h1",{id:"utilities"},"Utilities"),(0,l.kt)("h2",{id:"garbage-collection"},"Garbage collection"),(0,l.kt)("p",null,"This command purges removed entities in the instance. Purged entities are not recoverable."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli gc [instance uri]\n")),(0,l.kt)("p",null,"The garbage collection aims to hold the storage size within an acceptable range. It keeps removing the oldest removed entity until the total storage size is not greater than a predefined threshold."),(0,l.kt)("h1",{id:"others"},"Others"),(0,l.kt)("h2",{id:"special-rules-for-versioned-resources"},"Special rules for versioned resources"),(0,l.kt)("p",null,"Some resources are versioned, like models, datasets, and runtimes. There are some special rules for commands manipulating these resources."),(0,l.kt)("h3",{id:"versioned-resource-creation-and-update"},"Versioned resource creation and update"),(0,l.kt)("p",null,"The command for creation and update has the following pattern:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model/dataset/runtime build <resource uri> [working dir]\n")),(0,l.kt)("p",null,"A new resource with one version is automatically created when the specified resource URI does not exist. Otherwise, a new version of the resource is created and becomes the latest version."),(0,l.kt)("h3",{id:"versioned-resource-removal-and-recovery"},"Versioned resource removal and recovery"),(0,l.kt)("p",null,"The commands for removal and recovery have the following pattern:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"swcli model/dataset/runtime remove/recover <resource uri>\n")),(0,l.kt)("p",null,"Only the specified version will be removed/recovered if the resource URI has the version part. Otherwise, the resource with the whole history will be removed/recovered."),(0,l.kt)("p",null,"If the resource has only one version and is being removed, the resource is removed as well."))}p.isMDXComponent=!0}}]);